class ApiService{static DEFAULT_URL="/api/";static DEFAULT_ENDPOINT="process.php";static DEFAULT_METHOD="GET";static DEFAULT_DATATYPE="json";constructor(){this.url=ApiService.DEFAULT_URL}async request(e=ApiService.DEFAULT_ENDPOINT,{method:t=ApiService.DEFAULT_METHOD,data:r=null,headers:s={},dataType:o=ApiService.DEFAULT_DATATYPE,signal:n=null,...a}={}){let i={url:""+this.url+e,method:t,dataType:o,data:"GET"===t?r:JSON.stringify(r),headers:{"Content-Type":o,...s},...a};return new Promise((s,a)=>{$.ajax({...i,beforeSend:e=>{n&&n.addEventListener("abort",()=>e.abort(),{once:!0})}}).done((e,t,r)=>{if("json"===o&&"object"!=typeof e)try{e=JSON.parse(e)}catch(e){return a(new Error("<strong>Erreur de parsing JSON:</strong> "+e.message))}s(e)}).fail((e,t,r)=>{a("abort"===t?new DOMException("Aborted","AbortError"):new Error("<strong>Erreur lors du retour de l'API:</strong> "+r))})})}get(e,t){return this.request(e,{method:"GET",...t})}post(e,t,r){return this.request(e,{method:"POST",data:t,dataType:"json",...r})}put(e,t,r){return this.request(e,{method:"PUT",data:t,dataType:"json",...r})}delete(e,t,r){return this.request(e,{method:"DELETE",data:t,dataType:"json",...r})}}export{ApiService};